<p id="notice"><%= notice %></p>

<h1>Listing Task Infos</h1>

<script type="text/javascript">
<!--
function reload_index_page(){
	window.location.href = "<%= task_infos_path %>?view_status_name=" + $("#view_status_select").val();
}
-->
</script>

<%= select "", "", TaskStatus.all.map { |c| ["#{c.name_jp}のみ表示", c.name_jp] }, {:include_blank => true, :selected => @view_status_name}, {:onchange => "reload_index_page()", :id => "view_status_select"} %>

<table>
  <thead>
    <tr>
      <th>タイトル</th>
	  <th>詳細</th>
	  <th>進捗</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @task_infos.each do |task_info| %>
      <tr>
        <td><%= task_info.title %></td>
		<td><%= task_info.detail %></td>
		<% task_status = TaskStatus.find_by(:id => task_info.task_status_id) %>
		<td id='show_task_status'><%= task_status != nil ? task_status.name_jp : "" %></td>
        <td><%= link_to 'Show', task_info %></td>
        <td><%= link_to 'Edit', edit_task_info_path(task_info) %></td>
        <td><%= link_to 'Destroy', task_info, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Task info', new_task_info_path %>
